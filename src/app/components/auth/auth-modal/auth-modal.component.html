<div>
  <div mat-dialog-title>{{isSigninMode() ? 'Sign In' : 'Sign Up'}}</div>
  <div mat-dialog-content>
    <div class="mode-switcher-wrapper mt-m mb-m">
      {{ isSigninMode() ? "Don't have an account?" : "Already have an account?" }}
      <button mat-stroked-button color="primary" (click)="onSwitchAuthMode()">
        {{ isSigninMode() ? 'Sign up' : 'Sign in' }}
      </button>
    </div>

    <form [formGroup]="form" class="form-wrapper">
      <mat-form-field class="lmn-form-field-m" appearance="outline">
        <mat-label>Email</mat-label>
        <input matInput formControlName="email" />

        @if (form.get('email')?.getError('required')) {
          <mat-error>Email is required</mat-error>
        }

        @if (form.get('email')?.getError('email')) {
          <mat-error>Invalid email</mat-error>
        }
      </mat-form-field>

      <mat-form-field class="lmn-form-field-m" appearance="outline">
        <mat-label>Password</mat-label>
        <input matInput formControlName="password" />

        @if (form.get('password')?.getError('required')) {
          <mat-error>Password is required</mat-error>
        }

        @if (form.get('password')?.getError('minLength')) {
          <mat-error>Min 6 characters</mat-error>
        }
      </mat-form-field>

      @if (!isSigninMode()) {
        <mat-form-field class="lmn-form-field-m" appearance="outline">
          <mat-label>Confirm Password</mat-label>
          <input matInput formControlName="confirmPassword" />

          @if (form.get('confirmPassword')?.getError('mismatch')) {
            <mat-error>Passwords must match</mat-error>
          }
        </mat-form-field>
      }
    </form>
  </div>
  <mat-dialog-actions class="dialog-actions">
    <button mat-flat-button color="primary" class="dark-button" mat-dialog-close>Cancel</button>
    <button mat-flat-button color="primary" class="gradient-button" (click)="onAuthenticate()">
      {{isSigninMode() ? 'Sign In' : 'Sign Up'}}
    </button>
  </mat-dialog-actions>
</div>
